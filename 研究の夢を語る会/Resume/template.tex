\documentclass[twocolumn, a4paper, 9pt]{jarticle}

\makeatletter
\def\section{\@startsection{section}{1}{\z@}{2ex plus .2ex minus .2ex}%
  {.5ex plus .2ex minus .2ex}{\large\bfseries}}
\def\thesection{\arabic{section}.}
\def\subsection{\@startsection{subsection}{1}{\z@}{.7ex plus .2ex minus .2ex}%
  {.5ex plus .2ex minus .2ex}{\normalsize\bfseries}}
\def\thesubsection{\arabic{section}.\arabic{subsection}}
\def\thefootnote{\fnsymbol{footnote}}
\makeatother

% ipsj-kansai
\setlength{\topmargin}{-10mm} % 15mm - 1in
\setlength{\headheight}{5mm}
\setlength{\headsep}{5mm}
\setlength{\oddsidemargin}{-7mm} % 18mm - 1in
\setlength{\evensidemargin}{-7mm} % 18mm - 1in
\setlength{\textheight}{247mm} % 297 - 25(top) - 25(bottom)
\setlength{\textwidth}{174mm} % 210 - 18*2
\setlength{\columnsep}{7mm}

\usepackage{fancyhdr}
\pagestyle{empty}
\thispagestyle{fancy}
\rhead[]{\fontsize{9pt}{9pt} 研究の夢を語る会@SocSEL}
\cfoot[]{}
\renewcommand{\headrulewidth}{0pt}

\begin{document}
\twocolumn[
  \begin{center}
    {
      {\bf \Large オブジェクト操作入力に基づくScratch作品検索の実現に向けて \\} % 14.4pt
      \vspace{0.5ex}
    }
    \vspace{1.5ex}
    {
      \fontsize{10.5pt}{10pt}
      \begin{tabular}{c}
        福地　ユキ
      \end{tabular}
    }
    \vspace{1.5ex}
  \end{center}
]


%%%%%%%%%%%%%%%%%%%%
\section{はじめに}
近年，ビジュアルプログラミング言語を利用したプログラミング教育が進められている．
ビジュアルプログラミング言語の利点は，学習者が記法にとらわれずパズルのように実装できることである．
代表的なビジュアルプログラミング言語として，Scratchが挙げられる．
Scratchでは，プログラム中の命令処理がブロックで表現され，そのブロックを組み合わせることでプログラミングを行う．
また，制作したプログラム作品をオンラインサービス上に公開することができる．

多くのビジュアルプログラミング言語には明確な学習順序がなく，
学習者が自由な発想で作品を制作するが故に，公開されている既存のプログラムを模倣することから学習を開始する~\cite{CSCW2016_Dasgupta}．
しかし，Scratch作品のキーワード検索において，学習者が実装しようとする動作の言語化が困難であることや，
作品のタイトルや概要に動作に関するキーワードが含まれているとは限らないことから，
学習者が模倣するために有用となる作品を検索することは容易ではない．

本研究では，学習者が実装しようとする動作のイメージ画像を検索クエリとして，
オンラインサービス上に公開される膨大なプログラム作品の中から学習者のイメージに類する作品を検出する手法を提案する．
プログラムではなく画像を対象に検索することで，動作は同じでも実装方法の異なる作品の提示が期待できる．
%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%
\section{手法}
キー入力やマウス操作を必要とせず，無限ループをしない，動きブロック
（例: 指定した座標位置にオブジェクトを移動させるブロック，オブジェクトを回転させるブロックなど）
を用いた単純な動作を含む作品を検索する．

\noindent\textbf{(1)検索対象の作品を収集:}
公開された作品の動画から，Webアプリケーションの自動テストツールSeleniumを用いてスクリーンショットを収集し，
検索対象の各作品の最初と任意時点のフレームの画像を取得する．

\noindent\textbf{(2)オブジェクトの移動方向を検出:}
画像認識技術のSIFT 特徴量~\cite{vision2004_lowe}を用いて，(1)で取得した2 つの画像間で移動するオブジェクトの
移動前後の座標から移動方向を算出する．
具体的には，オブジェクトから右直線方向の
$0^\circ$，($0^\circ$〜$90^\circ$)，$90^\circ$，($90^\circ$〜$180^\circ$)，$180^\circ$，($180^\circ$〜$270^\circ$)，$270^\circ$，($270^\circ$〜$360^\circ$)
の8 方向の移動に分類して検出する．
ただし，オブジェクトの移動距離は任意とする．

\noindent\textbf{(3)入力オブジェクト操作の移動方向を検出:}
学習者が実装しようとする動作の最初と最後のフレームのイメージ画像を入力とし，
(2)と同様に2 つの画像間で移動するオブジェクトの
移動前後の座標から移動方向を検出する．

\noindent\textbf{(4)移動方向が一致する作品を推薦:}
公開作品の中から，入力オブジェクト操作の移動方向（8 方向）が一致する作品を推薦する．
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\section{結果}
提案手法を用いて，オブジェクトが画面左下から右上へ移動する作品を検出する動作実験を実施した．
検索対象として，実験者が5件のScratch公開作品を制作し，
提案手法を適用した結果，プログラムの内容は異なっていても移動方向が同じ作品3件を検出した．
具体的には，画像の左下から右上へ直線移動，円を描きながら移動など様々なプログラムで移動する作品を検出した．

また，Scratch既存作品を対象とした動作実験も実施した．
タイトルもしくは概要に``cat''を含み，操作を必要としない，動きブロックを含む122件の作品に対してオブジェクトの移動方向を検出した結果，29件の作品で移動方向を検出した．
検出された移動方向と実際の移動方向を実験者が目視で確認したところ，29件中11件の作品で移動方向が一致した．
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\section{今後の課題}
本研究ではオブジェクトの移動方向のみを用いた作品検索を実現した．
今後は，複雑な動作（例:移動や回転を組み合わせた動作など）の検出を目指し，
最初と任意時点のフレーム画像を取得するのではなく，
詳細な間隔ごとのフレーム画像を取得し，各フレーム間におけるオブジェクトの座標変化を観察することで，
複雑動作の検出方法を検討する．

現時点では著者が指定した画像をオブジェクトとしたが，実際の公開作品では様々な画像が使用されているため，
動作する多数のオブジェクトを特定する手法を検討する必要がある．

また，画像認識の結果に誤差が発生する場合があり，オブジェクトの座標が変化していないにもかかわらず変化したと捉えられてしまうことがある．そのため，画像認識による誤差を考慮する必要がある．

現時点ではキー入力やマウス操作を必要とせず，無限ループをしない作品を検索対象としている．Seleniumによるスクリーンショット取得時にキー入力やマウス操作を自動化し，作品の動画が１ループしたタイミングを検知する手法を検討することで，より多くの作品が検索可能になると考える．

提案手法を用いたScratch作品検索サービスを提供することで，学習者は実装したい動作を言語化することなく，模倣のために有用な作品を発見することができる．また，動作は同じでも実装方法の異なる作品が提示できるため，様々な実装方法の学習を支援できる．
%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{ipsjunsrt}
\bibliography{bibfile}

\end{document}